# üéØ –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è KatFlow

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è KatFlow.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
**–ü—Ä–æ–±–ª–µ–º–∞**: URL API –±—ã–ª –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤ –∫–æ–¥–µ
**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env.example` —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã**:
- `.env.example` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `src/lib/constants.ts` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `import.meta.env.VITE_API_URL`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –õ–µ–≥–∫–∞—è —Å–º–µ–Ω–∞ API –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ –∫–æ–º–º–∏—Ç–∏–º credentials)
- –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è dev/staging/prod

### 2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**
**–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª**: `src/lib/constants.ts`

**–°–æ–¥–µ—Ä–∂–∏—Ç**:
- API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ React Query
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –±–∞–ª–ª–æ–≤ —ç–Ω–µ—Ä–≥–∏–∏
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏
- –ü–µ—Ä–∏–æ–¥—ã –≤—Ä–µ–º–µ–Ω–∏
- –¶–µ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª
- –õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

### 3. **–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–Ω–µ—Ä–≥–∏–µ–π**
**–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª**: `src/lib/energyUtils.ts`

**–§—É–Ω–∫—Ü–∏–∏**:
- `getEnergyCategory()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –±–∞–ª–ª—É
- `getEnergyColorClass()` - –ø–æ–ª—É—á–µ–Ω–∏–µ CSS –∫–ª–∞—Å—Å–∞
- `parseDate()` - –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ DD.MM.YYYY
- `calculateStats()` - —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `filterEntriesByPeriod()` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 4. **–£–ª—É—á—à–µ–Ω–Ω—ã–π —Ö—É–∫ useEnergyData**
**–§–∞–π–ª**: `src/hooks/useEnergyData.ts`

**–£–ª—É—á—à–µ–Ω–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏–∑ `constants.ts`
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ staleTime –∏ gcTime

### 5. **Error Boundary**
**–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª**: `src/components/ErrorBoundary.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ü–µ—Ä–µ—Ö–≤–∞—Ç JavaScript –æ—à–∏–±–æ–∫
- –ö—Ä–∞—Å–∏–≤—ã–π UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
- –ü–æ–∫–∞–∑ stack trace –≤ dev —Ä–µ–∂–∏–º–µ

## üé® –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è UI

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã Tailwind
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–ª–∞—Å—Å—ã —Ç–∏–ø–∞ `border-l-${colorClass}` –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cn()` —Å —É—Å–ª–æ–≤–∏—è–º–∏:
```typescript
import { cn } from '@/lib/utils';

const borderClass = cn({
  'border-l-energy-excellent': score >= 5,
  'border-l-energy-good': score === 4,
  'border-l-energy-neutral': score === 3,
  'border-l-energy-medium-low': score === 2,
  'border-l-energy-low': score === 1,
});
```

### 2. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
**–î–æ–±–∞–≤–∏—Ç—å useMemo –≤ `Index.tsx`**:
```typescript
const stats = useMemo(() => {
  return calculateStats(filteredEntries);
}, [data?.entries, timePeriod]);
```

### 3. –£–ª—É—á—à–∏—Ç—å UX
- –î–æ–±–∞–≤–∏—Ç—å skeleton loaders –≤–º–µ—Å—Ç–æ —Å–ø–∏–Ω–Ω–µ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å transition –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –≤–∫–ª–∞–¥–æ–∫
- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–∏—Ç—å ErrorBoundary –≤ App.tsx
```typescript
import ErrorBoundary from '@/components/ErrorBoundary';

const App = () => (
  <ErrorBoundary>
    <QueryClientProvider client={queryClient}>
      {/* ... */}
    </QueryClientProvider>
  </ErrorBoundary>
);
```

### 2. –î–æ–±–∞–≤–∏—Ç—å PWA –ø–æ–¥–¥–µ—Ä–∂–∫—É
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `vite-plugin-pwa`
2. –î–æ–±–∞–≤–∏—Ç—å –º–∞–Ω–∏—Ñ–µ—Å—Ç
3. –î–æ–±–∞–≤–∏—Ç—å service worker
4. –í–∫–ª—é—á–∏—Ç—å –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º

### 3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Lazy loading –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
- Code splitting –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è bundle size

## üìä –£–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### 1. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/PDF
- –ü–µ—á–∞—Ç—å –æ—Ç—á–µ—Ç–æ–≤
- Sharing —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Google Calendar –¥–ª—è –æ—Ç–º–µ—Ç–æ–∫
- Slack/Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Notion/Obsidian

### 3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ (–ø–æ–≥–æ–¥–∞, –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏)
- –ü—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ ML

### 4. –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- Sharing –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- Team —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏
- –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- Zod —Å—Ö–µ–º—ã –¥–ª—è API responses
- Sanitization –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Rate limiting –Ω–∞ API

### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã
- Refresh token –º–µ—Ö–∞–Ω–∏–∑–º
- –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF

## üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –í–æ–∑–º–æ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- React Native
- Capacitor
- Flutter

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Widget –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ —ç–∫—Ä–∞–Ω–∞
- –ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏

## üöÄ Deployment

### CI/CD Pipeline
```yaml
# .github/workflows/deploy.yml
name: Deploy
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run build
      - run: npm run deploy
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
- Tree shaking
- Minification
- Compression
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. Analytics
- Google Analytics
- Sentry –¥–ª—è error tracking
- Performance monitoring

### 2. Logging
- Structured logging
- Log aggregation
- Alerting

---

## üìù –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è

1. **–ë—ã—Å—Ç—Ä—ã–µ —É–ª—É—á—à–µ–Ω–∏—è** (1-2 —á–∞—Å–∞):
   - –î–æ–±–∞–≤–∏—Ç—å ErrorBoundary –≤ App.tsx
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é

2. **–°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è** (1 –¥–µ–Ω—å):
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PWA
   - –£–ª—É—á—à–∏—Ç—å error handling

3. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è** (–Ω–µ–¥–µ–ª–∏):
   - –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - ML –ø—Ä–æ–≥–Ω–æ–∑—ã
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
1. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —É–ª—É—á—à–µ–Ω–∏—è
2. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –°–æ–∑–¥–∞–π—Ç–µ feature branch
4. –°–¥–µ–ª–∞–π—Ç–µ PR —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
